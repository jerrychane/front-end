## Git基本操作，一篇文章就够了

### 1、Git简介

使用git作为版本控制工具，已成为团队协作开发的主流。因此，对基本的git操作指令进行总结便十分重要。对一些基本术语和理论基础的理解，也变得十分重要。本文主要对日常工作常用的一些基本命令做归纳总结。

首先必须知道git的通用操作流程图，如下(来源于网络)：

![](https://github.com/jerrychane/front-end-study/blob/master/img/2019082801.png)

主要涉及四个关键点：

(1) 工作区(workspace)：本地电脑存放项目文件的地方;

(2) 暂存区(index/stage): 在使用git管理项目文件的时候，本地项目文件中会多出一个.git的文件夹，将这个.git文件夹称之为**版本库**。其中.git文件夹中又包含了两部分，一部分叫做**暂存区**(index/stage),顾名思义就是暂时存放文件的地方，通常使用**add命令**将工作区的文件添加到暂存区里；

(3)本地仓库(repository): .git文件夹里还包括git自动创建的master分支，并且将HEAD指针指向master分支。使用**commit命令**可以将暂存区中的文件添加至本地仓库中；

(4)远程仓库(remote):不是在本地仓库中，项目代码在远程git服务器上，例如项目放在github上，就是一个远程仓库，经常使用**clone命令**将远程仓库拷贝到本地仓库中，开发后推送到远程仓库中即可。

其中更细节的说明：

![](https://github.com/jerrychane/front-end-study/blob/master/img/2019082802.png)

日常开发时，代码实际放置在工作区中，就是本地电脑中的文件，通过add等命令将这些代码提交给暂存区(index/stage),也就意味着代码全权交给git进行管理，之后通过commit等命令将暂存区中的代码提交到master分支上，此时便便完成一个版本的创建，标志是代码提交到了本地仓库中。此外，团队协作中必然涉及与远程仓库的交互。

因此，经过这样的分析，git命令的逻辑理解和记忆可以总结如下：

(1) git管理配置的命令：**几个核心存储区的交互命令**；

(2)工作区与暂存区的交互；

(3)暂存区与本地仓库(分支)上的交互；

(4)本地仓库与远程仓库的交互。

### 2、Git配置命令

> 查询配置信息

(1) 列出当前配置： ` git config --list`

(2) 列出repository(本地仓库)配置：`git config --local --list` 

(3) 列出全局配置：`git config --global --list`

(4) 列出系统配置：`git config --system --list`

> 首次使用Git，配置用户信息

(1) 配置用户名：`git config --global user.name "your name"`

(2) 配置用户邮箱: `git config --global user.email "youremail@github.com"`

> 其他配置

(1) 配置解决冲突时，使用哪种差异分析工具，例如要使用vimdiff：`git config --global merge.tool vimdiff`

(2) 配置git命令输出为彩色：`git config --global color.ui auto`

(3) 配置git使用的文本编辑器：`git config --global  color.editor vi`

### 3、工作区上的操作命令

> 新建仓库即初始化

(1) 将工作区中的文件使用git进行管理，即创建一个新的本地仓库:`git init`

(2) 从远程仓库赋值项目：`git clone <url>`  or `git clone -b 分支名 <url>`; 克隆项目时如果想定义新的项目名，可以在clone命令后指定新的项目名：`git clone git://github.com/jerrychane/example.git mygit` ; 

> 提交

(1) 提交工作区所有文件到暂存区：`git add .`

(2) 提交工作区中指定文件到暂存区：`git add <file1> <file2> ...`

(3) 提交工作区中某个文件夹中所有文件到暂存区： `git add [dir]`

> 撤销

(1) 删除工作区文件，并且也从暂存区删除对应文件的记录：`git rm <file1> <file2>`

(2) 从暂存区中删除文件，但是工作区依然有该文件 ： `git rm --cached <file>`

(3) 取消暂存区已经暂存的文件 ：`git reset HEAD <file> ...`

(4) 撤销上一次对文件的操作： `git checkout --<file>`；要确定上一次对文件的修改不再需要，如果想保留上一次的修改以备以后继续工作，可以使用 stashing 和 分支来处理；

(5) 隐藏当前变更，以便能够切换分支： `git stash`;

(6) 查看当前所有的储藏：`git stash list`

(7) 应用新的储藏：`git stash apply` , 如果想应用更早的储藏：`git stash apply stash@{2}`，重新应用被暂存的变更，需要加上 --index参数：`git stash apply --index` ;

 (8) 使用 apply 命令只是应用隐藏，而内容仍在栈上，需要移除指定的储藏：`git stash drop stash{0}`;  如果使用 pop 命令不仅可以重新应用储藏，还可以立刻从堆栈中清除：`git stash pop`;

> 重命名文件

重命名文件，并将已改名文件提交到暂存区：`git mv [file-original] [file-renamed]`;

> 查新信息

(1) 查询当前工作去所有文件的状态： `git status`;

(2) 比较工作去中当前文件和暂存区之间的差异，也就是修改之后还没暂存的内容：`git diff` ; 查询指定文件在工作去和暂存区上差异的比较：`git diff <file-name>`;

### 4、暂存区上的操作命令

> 提交文件到版本库

(1) 将暂存的文件提交到本地仓库中，即打上新版本： `git commit -m "commit_info";`

(2) 将所有已经使用 git 管理过的文件暂存后一并提交，跳过 add 到暂存区的过程： `git commit -a -m "commit_info";`

(3) 提价文件时，发现漏掉几个文件，或者是注释写错了，可撤销上一次的提交：`git commit --amend` ;

> 查看信息

(1) 比较暂存区与上一版本的差异： `git diff --cached`;

(2) 指定文件在暂存区和本地仓库的不同： `git diff <file-name> --cached`;

(3) 查看提交历史： `git log` ; 参数 -p 展开每次提交的内容差异，用 -2 显示最近的两次更新，如 `git log -p -2`;

> 打标签



