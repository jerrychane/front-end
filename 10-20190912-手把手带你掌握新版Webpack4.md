### 安装webpack	

```js
npm init / npm init -y (自动生成默项)
npm install webpack-cli --save-dev
```

### 运行webpack

```js
npx webpack index.js //用webpack翻译index.js文件
```

注意： 

1. npx 和npm 的区别，其实很简单，npx会在目录下的node_modules下面找webpack，没有就安装一个。npm 则先去全局，然后再去当前目录下的node_modules找webpack，没有就不找了；
2. devDependencies 和 dependencies的区别，devDependencies 指的是你本地开发环境下的依赖(比如webpack，babel以及一系列的loader等)；dependencies 指的是你生产环境下打包所需要的依赖(比如你项目中用到了lodash，那么你就应该配置到这个下边)

### webpack环境搭建

webpack是基于nodejs开发的模块打包工具。提升webpack打包速度，一定要安装最新稳定版本。

(1) node版本要使用最新稳定版；（2）webpack要使用最新版本；

### webpack的安装方式

**全局安装：**

`npm install webpack webpack-cli -g`; (安装时，如果npm安装很慢，建议使用手机分享热点，就不会有该问题了)

webpack-cli@3.1.2   webpack@4.26.0

全局安装特定版本：`npm install webpack@4.26.0 webpack-cli -g`;

不推荐使用webpack全局安装；卸载全局安装的webpack `npm uninstall webpack webpack-cli -g`

**项目中安装：**

`npm install webpack webpack-cli --save-dev   `  或者`npm install webpack webpack-cli -D`

其中--save-dev等价于-D；

安装特定版本：

`npm install webpack@4.26.0 webpack-cli --save-dev`

此时无法运行webpack命令，如果要运行webpakc命令，需要执行` npx webpack -v`, 输出webpack版本

`npm info webpack`  or  `npm view webpack versions`  当不知道某个版本号是否存在时，查看webpack的所有版本号

### webpack的配置文件

创建默认配置文件 --- webpack.config.js，默认文件名必须是wepack.config.js；若要修改默认文件名，可用以下命令：

```js
npx webpack --config  webpackconfig.js // 修改默认配置文件名为 webpackconfig.js
```

```js
// webpack.config.js
const path = require('path');
module.exports = {
    mode:'production', // 开发环境: development，bundle.js中代码不会被压缩
    entry : './src/index.js',
     /* entry :  {
        main: './src/index.js'
    },*/
    output : {
       filename:'bundle.js',
       path:path.resolve(__dirname,'dist')
    }
}
```

配置打包命令时，可用npm script 替代 npx webpack，需在package.json文件中进行配置，如下，运行npm run bundle即可

```json
scripts:{
    "bundle" : "webpack"
}
```

webpack-cli的作用就是使得我们可以使用 npx webpack 或 webpack 的命令。

### 什么是Loader

loader 本质是一个打包的方案，它知道对于某一个特定的文件，webpack应该怎样打包，因为webpack无法识别非.js结尾的模块，loader在module中配置。安装file-loader : `npm install file-loader --save-dev`。

```js
module:{
        rules:[{
            test:/\.(jpg|png|gif)$/,
            use:{
                loader:'file-loader',
                options:{
                    // placeholder 占位符语法
                    name:'[name]_[hash].[ext]', // 图片文件以原来的名字输出
                    outputPath:'images/'
                }
            }
        }]
    },
```

url-loader 除了能做 file-loader 做的事情，还能做额外的事情，url-loader会将图片转换成一个base64的字符串，安装 url-loader :`npm install url-loader --save-dev`; 当图片非常小时，

```js
module:{
        rules:[{
            test:/\.(jpg|png|gif)$/,
            use:{
                loader:'url-loader',
                options:{
                    // placeholder 占位符语法
                    name:'[name]_[hash].[ext]', // 图片文件以原来的名字输出
                    outputPath:'images/',
                    limit:2048 // 大于limit，生成图片文件; 小于limit，生成base64字符串
                }
            }
        }]
    },
```

### 使用 loader 打包静态资源(样式篇)

为了使webpack能够识别css文件，需要引入 style-loader , css-loader; 其中css文件可以帮助我们识别几个.css文件之间的关系，最终帮我们合并成一段css；style-loader 是在得到 css-loader生成的内容之后，style-loader会将这段内容挂载在head部分，生成`<style>...</style>` ; 若要识别 .scss文件，还要引入 sass-loader

安装loader：

```
npm install style-loader css-loader --save-dev
```

在webpack.config.js中配置：

```js
{
   test: /\.css$/,
   use: ['style-loader','css-loader'] 
 }
```

安装sass-loader:

```js
npm install sass-loader node-sass --save-dev
```

